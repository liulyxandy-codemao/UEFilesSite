<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <title>地球联合资源站</title>
    <link rel="icon" type="image/svg+xml" href="/src/uef-logo/logo.svg" media="(prefers-color-scheme: light)">
    <link rel="icon" type="image/svg+xml" href="/src/uef-logo/logo-white.svg" media="(prefers-color-scheme: dark)">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/src/js/tailwind3.4.3.js"></script>
    <link rel='stylesheet' href='/src/css/nprogress.css' />
    <script src="/src/js/broswer.js"></script>
    <script src="/src/js/html-to-image.min.js"></script>
    <script src="/src/js/qrcode.min.js"></script>
    <!-- <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script> -->
    <!-- <script>
    // VConsole 默认会挂载到 `window.VConsole` 上
    var vConsole = new window.VConsole();
  </script> -->
    <style type="text/tailwindcss">
        @font-face {
      font-family: Rajdhani-Medium;
      src: url(/src/font/Rajdhani-Medium.woff);
    }
    @font-face {
      font-family: LibreBarcode39-Regular;
      src: url(/src/font/LibreBarcode39-Regular.ttf);
    }
  </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'rajdhani': ['Rajdhani-Medium'],
                        'barcode': ['LibreBarcode39-Regular']
                    }
                }
            }
        }
    </script>
</head>

<body>
    <header>
        <div class="bg-black hidden lg:block">
            <div class="h-20 px-4 flex items-center justify-between">
                <a class="flex h-full items-center" href="/">
                    <img class="h-10 mb-0.5" src="/src/uef-logo/logo-white.svg">
                    <img class="h-6 ml-8" src="/src/uef-logo/text-eng-white.svg">
                </a>
                <div class="flex h-full items-center justify-between w-1/2 mr-4">
                    <a class="font-medium text-white" href="/color">颜色</a>
                    <a class="font-medium text-white" href="/font">字体</a>
                    <a class="font-medium text-white" href="/logo">标志</a>
                    <a class="font-medium text-white" href="/tool">工具</a>
                    <a class="font-medium text-white" href="/about">关于</a>
                    <a target="_blank" class="font-medium text-white"
                        href="https://github.com/zaona/united-earth-files/discussions">交流</a>
                </div>
            </div>
        </div>

        <div class="bg-black block lg:hidden">
            <a class="h-20 px-4 flex items-center justify-between">
                <img id="menuToggle" class="h-[40px] cursor-pointer" src="/src/icon/menu-white.svg">
                <div class="h-6 ml-8 mr-1">
                    <img class="h-full" src="/src/uef-logo/text-eng-white.svg">
                </div>
            </a>
        </div>
        <div id="overlay" class="fixed inset-0 z-10 bg-black opacity-30 transition-opacity hidden"></div>
        <div id="sideMenu" class="z-20 fixed inset-y-0 left-0 w-80 bg-black transition ease-in-out"
            style="transform: translateX(-100%);">
            <div class="pt-14 w-full flex flex-col gap-2">
                <a class="py-2 px-8 text-white" href="/">首页</a>
                <a class="py-2 px-8 text-white" href="/color">颜色</a>
                <a class="py-2 px-8 text-white" href="/font">字体</a>
                <a class="py-2 px-8 text-white" href="/logo">标志</a>
                <a class="py-2 px-8 text-white" href="/tool">工具</a>
                <a class="py-2 px-8 text-white" href="/about">关于</a>
                <a target="_blank" class="py-2 px-8 text-black"
                    href="https://github.com/zaona/united-earth-files/discussions">交流</a>
            </div>
        </div>
        <script>
            let isOpen = false;            // 定义一个变量来记录侧边栏的打开状态
            document.getElementById('menuToggle').addEventListener('click', function () {        // 给菜单切换按钮添加点击事件监听器
                const sideMenu = document.getElementById('sideMenu');            // 获取侧边栏和遮罩层元素
                const overlay = document.getElementById('overlay');
                isOpen = !isOpen;            // 切换侧边栏的打开状态
                sideMenu.style.transform = isOpen ? 'translateX(0)' : 'translateX(-100%)';            // 根据侧边栏的打开状态，改变其平移值以实现展开或收起
                overlay.style.display = isOpen ? 'block' : 'none';            // 根据侧边栏的打开状态，控制遮罩层的显示或隐藏
            });
            document.getElementById('overlay').addEventListener('click', function () {        // 给遮罩层添加点击事件监听器，以便于点击遮罩层时关闭侧边栏
                document.getElementById('menuToggle').click();            // 触发菜单按钮的点击事件来关闭侧边栏
            });
        </script>
    </header>

    <div class="px-4 py-8 lg:py-0">
        <div
            class="flex justify-center lg:flex-row flex-col items-center lg:h-screen max-w-[1200px] mx-auto gap-[16px]">
            <div class="lg:basis-1/2">
                <div class="w-[360px] relative" id="card">
                    <img clss="w-[360px]" src="/tool/ueg-card/bg.svg">
                    <div class="bg-[#F3F4F6] h-[78px]" id="card-footer">
                        <div class="h-full flex items-center justify-between mx-auto">
                            <p class="text-[14px] text-[#6C7280] ml-4">Made By UEF.ZAONA.TOP</p>
                            <img class="h-full" src="/src/img/earth-engine.svg">
                        </div>
                    </div>
                    <img class="absolute top-[88.84px] left-[45.085px] w-[130px] h-[166px] object-cover"
                        src="/tool/ueg-card/zzz.png" id="avatar" />
                    <div class="absolute top-[128px] left-[236px] w-[80px] h-[80px]" id="qrcode" title="uef.zaona.top">
                        <canvas width="80" height="80" style="display: none;"></canvas><img
                            src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAAXNSR0IArs4c6QAAA41JREFUeF7tnNlShDAQReH/P3osLC0yge45uc0AjtdHzXrSe4LzNE2P6Q0/j8c67DzPwzO0/Wnndp7q/HhOA6So9tstomEJLDB8AqioTTv3qAr180X96f7I/EfucVmXAdLT+WnX23MDfBdA4jmrKtjPEXlO8vuMA1HtrH/m0UMJNMAVqQE2cagSH14OkKoQ2VzmRck8ZI5enQ3QErhvj3pJ+XcSSCMIAmYZK1Jv2j9az21V2ACbist3WgNsjZJKkXFvJ4FUOiq5cObtovmzfJmAVg4w2uPlubABdgSIBNCUyRIoVKSJet1ahRW7N+r6s5CAFA2qAI/c48YGHjn4KIzeixJzQKtBpDCi7v30kv7HSeCDGB71eHb6UWkgEkxTuQOXvxlqNsAaXgOs8ZsQQHpbRtqRNllaWNzvU7pJY9LM7BhgQJEWXg2wCrB9mUA8n6KCVO3I/FliTwIKuv5snqe/GeDr401toAHeCKCSfpGqS9uGqCn14jSozxCji3VqmwwwKEEZYCyDlsDXJjBtgQBGNog+DnqXDaPFBMXWYa0jXtgA1zfemxqkAe5rqCSBo+YgqwhX1XZ0LbQwoGQyOJAeXbQBdm+kDXD/gwWpnFUNio9O2snhEruVwSCPkzaePyrpG+CKyhIIL/klCYzCGFoPq6gW6bu0odVhMh69VqVFDvSdiBLJ0+C7umnSn66FVHp6FgbY0JUAtk7kDEnLFjk6P33aQdWRAEy98OgG+sGIrTLAxOgYoPBlOTXQv+0+TgKjD65JTFTNhWlWUDUt1FMTDdrYQANckRggFbWgnQTwjOdtVAUVsxFlTCQkUa4kcDGheJhP3Q2wSPOjAZ7xb0+omkWgSZ1vmWO0BHdEFHDKI3MDFFRYcQh/XgKJ58pYkjI+tYdRhhNJc5aXK8UEYg6+zQYpqFIBNMDu+18K7redAcK7g6gwMAqQFhYULzx6+NQE4Io0sVVKQZNAVkKSvo8BCv8+gBw6BUuiiNSJkMVYAhMvfCRAEt9laksDcdIuMyEkdNkIzejztiw+IwtQ+hMwmypJ0QRgx2WAK3oiAJdIIM0ERrMPGgYpjoPAvMSJVFMxJQwywIbAnwFIT00x8HupXzYfvasg7aoFk42zOruYQFU4sofVIqgBJpf/l0ugorZRH5IKUWmgHpGMRyWYasqtSvok3MmkzAADgpZAIQwh3j27GCfS3LchZqfv8wVqJzIrLQ7ZwQAAAABJRU5ErkJggg=="
                            style="display: block;"></div>
                    <!-- <div class="absolute top-[128px] left-[236px] w-[80px] h-[80px]" id="qrcode"></div> -->
                    <p class="absolute top-[266px] left-[105px] text-[50px] font-bold text-white mt-[0px] font-rajdhani"
                        id="family-name">ZHOU
                    </p>
                    <p class="absolute top-[320px] left-[105px] font-bold text-white mt-[0px] font-rajdhani"
                        id="first-name">
                        ZHEZHI
                    </p>
                    <p class="absolute top-[381px] left-[105px] font-bold text-white mt-[0px] font-rajdhani"
                        id="position">
                        PERMANENT REPRESENTATIVE
                    </p>
                    <p class="absolute top-[497.5px] left-[40px] mt-[0px] text-[36px] font-barcode" id="barcode">
                        barcode
                    </p>
                </div>
            </div>

            <div class="lg:basis-1/2 w-full">
                <div class="w-full bg-[#F9FAFB] border-solid border-[1px] px-4 lg:px-10 py-4 lg:py-10 ">
                    <div class="flex flex-col gap-3">
                        <p class="text-2xl font-bold mb-2">UEG 名牌生成</p>
                        <input type="file" class="w-full file:cursor-pointer
              file:mr-4 file:py-2 file:px-4
              file:rounded-0 file:border-0
              file:bg-black file:text-white" id="imageFile" />
                        <input type="text" placeholder="姓" id="input-family-name"
                            class="appearance-none border-2 border-black rounded-none focus:rounded-none bg-white px-3 py-2 text-black outline-none" />
                        <input type="text" placeholder="名" id="input-first-name"
                            class="border-2 border-black rounded-none focus:rounded-none bg-white px-3 py-2 text-black outline-none" />
                        <input type="text" placeholder="职位" id="input-position"
                            class="border-2 border-black rounded-none focusrounded-none bg-white px-3 py-2 text-black outline-none" />
                        <!-- <input type="text" placeholder="二维码" id="input-qrcode"
                  class="border-2 border-black rounded-none focusrounded-none bg-white px-3 py-2 text-black outline-none" /> -->
                        <input type="text" placeholder="条形码" id="input-barcode"
                            class="border-2 border-black rounded-none focusrounded-none bg-white px-3 py-2 text-black outline-none" />
                        <button class="border-2 border-black bg-black px-6 py-2 font-medium text-white"
                            id="screenshotBtn">下载</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- 信息更新 -->
    <script>
        document.getElementById('imageFile').addEventListener('change', function (event) {
            var file = event.target.files[0]; // 获取选中的文件
            if (file) {
                var reader = new FileReader(); // 创建FileReader对象
                reader.onload = function (e) { // 定义读取完成后的方法
                    document.getElementById('avatar').src = e.target.result; // 将读取到的DataURL赋值给img元素的src
                    document.getElementById('avatar').style.display = 'block'; // 显示图片
                };
                reader.readAsDataURL(file); // 读取文件为DataURL
            } else {
                document.getElementById('avatar').src = ''; // 如果没有选中文件，清空图片src
                document.getElementById('avatar').style.display = 'none'; // 隐藏图片
            }
        });
        document.getElementById('input-family-name').addEventListener('input', function () {
            document.getElementById('family-name').textContent = this.value;
        });
        document.getElementById('input-first-name').addEventListener('input', function () {
            document.getElementById('first-name').textContent = this.value;
        });
        document.getElementById('input-position').addEventListener('input', function () {
            document.getElementById('position').textContent = this.value;
        });
        document.getElementById('input-barcode').addEventListener('input', function () {
            document.getElementById('barcode').textContent = this.value;
        });
    </script>

    <!-- 二维码生成 -->
    <!-- <script>
        // 定义二维码配置为常量
        const QR_CODE_CONFIG = {
          width: 80,
          height: 80,
          colorDark: "#000000",
          colorLight: "#ffffff"
        };
    
        // 初始化二维码
        function initQRCode(containerId, initialValue) {
          const container = document.getElementById(containerId);
          if (!container) return; // 确保DOM元素存在
    
          const qrCode = new QRCode(container, QR_CODE_CONFIG);
          qrCode.makeCode(initialValue);
    
          // 监听输入变化并更新二维码
          document.getElementById('input-qrcode').addEventListener('input', function () {
            if (qrCode) {
              qrCode.clear();
              qrCode.makeCode(this.value);
            }
          });
        }
    
        // 页面加载完成后初始化
        window.onload = function () {
          initQRCode('qrcode', 'uef.zaona.top');
        };
      </script> -->

    <!-- 图片生成 -->
    <script>
        document.getElementById("card-footer").hidden = true;

        function convertToImage() {
            //一个不可行的方案，生成图片时加入footer
            // document.getElementById("card-footer").hidden = false;
            // const card = document.getElementById('card').outerHTML;
            // const cardFooter = '<div class="bg-[#F3F4F6] h-[78px]" id="card-footer"><div class="max-w-[1200px] h-full flex items-center justify-between mx-auto"><p class="text-[14px] text-[#6C7280] ml-4">Made By UEF.ZAONA.TOP</p><img class="h-full hidden lg:block" src="/src/img/earth-engine.svg"></div></div>';
            // const cardAll = card + cardFooter;
            // const parser = new DOMParser()
            // const element = parser.parseFromString(cardAll, 'text/html');
            // console.log(cardAll);
            // console.log(element);

            const element = document.getElementById('card');
            document.getElementById("card-footer").hidden = false;

            // 定义转换选项以提高质量
            const options = {
                quality: 1, // 图像质量，范围从0到1，1为最高质量
                width: 712, // 可选，指定输出宽度，单位像素
                height: 1268.426, // 可选，指定输出高度，单位像素
                style: { // 自定义样式，用于覆盖或补充原有样式，以解决可能的渲染问题
                    transform: 'scale(2)', // 例如，放大元素两倍后再截图，可能会提高清晰度
                    transformOrigin: 'top left',
                },
            };

            // 使用options参数进行转换
            htmlToImage.toPng(element, options)
                .then(function (dataUrl) {
                    downloadImage(dataUrl, 'card.png');
                })
                .catch(function (error) {
                    console.error('Failed to generate image', error);
                });
        }

        // 点击事件监听器
        document.getElementById('screenshotBtn').addEventListener('click', convertToImage);

        // 下载图片的函数
        function downloadImage(dataUrl, fileName) {
            const link = document.createElement('a');
            link.href = dataUrl;
            link.download = fileName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link); // 下载后移除这个元素

            document.getElementById("card-footer").hidden = true;

        }

        document.addEventListener('DOMContentLoaded', (event) => {
            const element = document.getElementById('card');
            if (!element) {
                console.error('Element not found');
                return;
            }
            htmlToImage.toPng(element)
                .then(function (dataUrl) {
                    // console.log(dataUrl)
                })
        });
    </script>

    <footer>
        <div class="bg-[#F9FAFB] h-[250px]">
            <div class="max-w-[1200px] h-full mx-auto flex items-center justify-between px-4">
                <div class="hidden lg:block flex flex-col w-[166px]">
                    <img class="w-[67px] mb-2 pl-[2px]" src="/src/uef-logo/logo.svg">
                    <img class="w-full mb-1" src="/src/uef-logo/text.svg">
                    <img class="w-full pl-[2px] pr-[1px]" src="/src/uef-logo/text-eng.svg">
                </div>
                <div class="grid grid-cols-2 gap-x-[100px] lg:w-[350px] w-full">
                    <div class="">
                        <p class="text-[14px] font-bold mb-2">开源代码</p>
                        <a target="_blank" class="text-[14px] text-[#6C7280]"
                            href="https://github.com/zaona/united-earth-files">Github</a>
                    </div>
                    <div class="">
                        <p class="text-[14px] font-bold mb-2">特别鸣谢</p>
                        <p class="text-[14px] text-[#6C7280] mb-1">OSS Compass</p>
                        <p class="text-[14px] text-[#6C7280] mb-1">United Earth Team</p>
                        <p class="text-[14px] text-[#6C7280]">电影流浪地球</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-[#F3F4F6] h-[78px]">
            <div class="max-w-[1200px] px-4 h-full flex items-center justify-between mx-auto">
                <p class="text-[14px] text-[#6C7280]">Copyright © 2024 地球联合资源站。保留所有权利。</p>
                <img class="h-full hidden lg:block" src="/src/img/earth-engine.svg">
            </div>
        </div>
    </footer>

    <script src='/src/js/nprogress.js'></script>
    <script>
        NProgress.configure({
            minimum: 0.1, // 显示进度条所需的最小加载量
            easing: 'ease', // 动画效果
            speed: 500, // 动画速度（毫秒）
            trickleRate: 0.02, // 自动递增进度的速度
            trickleSpeed: 800, // 自动递增间隔（毫秒）
            showSpinner: false, // 是否显示加载指示器（旋转图标）
        });
        document.addEventListener('DOMContentLoaded', function () {
            if (window.localStorage.getItem('progress')) {
                NProgress.configure({ "easing": "none" }).set(Number(localStorage.getItem('progress')))
            }
            NProgress.configure({ "easing": "ease" }).start()
        });
        window.addEventListener('load', function () {
            NProgress.done()
            window.localStorage.removeItem('progress')
        });
        window.addEventListener('beforeunload', function (ev) {
            NProgress.start();
            window.localStorage.setItem('progress', NProgress.status)
            setInterval(function () {
                window.localStorage.setItem('progress', NProgress.status)
            }, 400);
        });
    </script>

</body>